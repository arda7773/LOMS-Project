{% extends "base.html" %}

{% block content %}
<h2>Enter Grades â€“ {{ assessment.name }}</h2>

<p>
    Curriculum:
    <strong>{{ curriculum.code }} - {{ curriculum.name }}</strong><br>
    Program: {{ curriculum.program.code }} - {{ curriculum.program.name }}<br>
    Max Score: {{ assessment.max_score }}
</p>

<form method="post">
    {% csrf_token %}
    <table border="1" cellpadding="4" cellspacing="0">
        <thead>
            <tr>
                <th>#</th>
                <th>Username</th>
                <th>Full Name</th>
                <th>Score ( / {{ assessment.max_score }})</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ row.student.username }}</td>
                    <td>
                        {% if row.student.get_full_name %}
                            {{ row.student.get_full_name }}
                        {% else %}
                            {{ row.student.username }}
                        {% endif %}
                    </td>
                    <td>
                        <input
                            type="number"
                            step="0.01"
                            min="0"
                            max="{{ assessment.max_score }}"
                            name="student_{{ row.student.id }}"
                            value="{{ row.score }}"
                        >
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="4">
                        No students matched for this curriculum (by grade & faculty).
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <button type="submit">Save Grades</button>
</form>

<p>
    <a href="{% url 'assessments:assessment_manage' curriculum.id %}">Back to Assessment List</a>
</p>
{% endblock %}
